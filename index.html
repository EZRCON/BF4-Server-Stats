<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Bf4-server-stats by tyger07</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Bf4-server-stats</h1>
          <h2>BF4 Server Stats Page using XpKiller's PRoCon stats logging plugin.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/tyger07/BF4-Server-Stats/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/tyger07/BF4-Server-Stats/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/tyger07/BF4-Server-Stats" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h2>
<a name="bf4-server-stats-overview" class="anchor" href="#bf4-server-stats-overview"><span class="octicon octicon-link"></span></a>BF4 Server Stats Overview</h2>

<p>This page requires the use of a stats database which is created by XpKiller's PRoCon "BF4 Chat, GUID, Stats and Mapstats Logger" Plugin.  If you need help with XpKiller's stats logger plugin, you must seek assistance in XpKiller's plugin thread.</p>

<h2>
<a name="help-and-support" class="anchor" href="#help-and-support"><span class="octicon octicon-link"></span></a>Help and Support</h2>

<p>Visit the following forum topic:</p>
<p><a href="https://forum.myrcon.com/showthread.php?6854">https://forum.myrcon.com/showthread.php?6854</a></p>

<h2>
<a name="installation-steps" class="anchor" href="#installation-steps"><span class="octicon octicon-link"></span></a>Installation Steps</h2>

<p>Download the following file:</p>

<p><a href="https://github.com/tyger07/BF4-Server-Stats/zipball/master">https://github.com/tyger07/BF4-Server-Stats/zipball/master</a></p>

<p>Extract the files.</p>

<p>You may change the appearance of the page by modifying the stats.css file in the common folder.</p>

<p>Fill in the required parameters before using this code.  You must place the necessary data between the single quotation marks (''). </p>

<p>Note:  You may not include single quotation marks (') in the following fields.  For instance, you may not call your clan 'Ty_ger07's Clan' as it will create a PHP compilation error.
For example, this would not work:</p>

<p>$clan_name = 'Ty_ger07's Clan'; // your gaming clan or organization name</p>

<p>You must use a PHP delimiter if you wish to use single quotes within the following fields.
For example, this would work:</p>

<p>$clan_name = 'Ty_ger07\'s Clan'; // your gaming clan or organization name</p>

<p><strong>You must fill in the following information in the config.php file found in the config folder</strong></p>

<p><strong>1)</strong> Input your stats database host, stats database user name, stats database password, and stats database name.</p>

<p>// DATABASE INFORMATION</p>

<p>DEFINE('HOST', '');                                                 // database host address</p>

<p>DEFINE('PORT', '3306');                                             // database port - default is 3306</p>

<p>DEFINE('NAME', '');                                                 // database name</p>

<p>DEFINE('USER', '');                                                 // database user name - sometimes the same as the database name</p>

<p>DEFINE('PASS', '');                                                 // database password</p>

<p>For example:</p>

<p>// DATABASE INFORMATION</p>

<p>DEFINE('HOST', '100.200.300.400');                                  // database host address</p>

<p>DEFINE('PORT', '3306');                                             // database port - default is 3306</p>

<p>DEFINE('NAME', 'database');                                         // database name</p>

<p>DEFINE('USER', 'user');                                             // database user name - sometimes the same as the database name</p>

<p>DEFINE('PASS', 'pass');                                             // database password</p>

<p><strong>Note:</strong> Some web server providers (such as GoDaddy) use the same value for database name and database user name.</p>

<p><strong>2)</strong> Input your clan name as you would like it to appear in the stats pages.</p>

<p>$clan_name = ''; // your gaming clan or organization name</p>

<p>For example:</p>

<p>$clan_name = 'MyClan'; // your gaming clan or organization name</p>

<p><strong>3)</strong> Input your desired banner image URL if you want one other than the default to be displayed.</p>

<p>$banner_image = './images/bf4-logo.png'; // your desired page banner</p>

<p><strong>4)</strong> Enter the URL which you would like users to redirect to if they click your banner image.</p>

<p>$banner_url = '<a href="http://tyger07.github.io/BF4-Server-Stats/">http://tyger07.github.io/BF4-Server-Stats/</a>'; // where clicking the banner will take you</p>

<p>Enjoy!</p>

<h2>
<a name="changelog" class="anchor" href="#changelog"><span class="octicon octicon-link"></span></a>Changelog:</h2>

<p>02-11-2017</p>

<ul>
<li>Free up the top 142px of the page when scrolling down.</li>
</ul>

<p>02-09-2017</p>

<ul>
<li>Instead of counting every bot view as a new bot, only add bot as a new bot if it is during a new bot session.</li>
</ul>

<p>02-07-2017</p>

<ul>
<li>Reduced the rate at which autocomplete tries to fill in searches</li>
<li>Added page request throttles.  If a user tries to load pages every 1 to 2 seconds, server adds a 1 second delay.  If a user tries to load pages every 1 second or less, the server denies the request and gives them an error message and redirect link.</li>
</ul>

<p>02-05-2017</p>

<ul>
<li>Added warning to scoreboard if a possible server connection issue was detected</li>
<li>Added simple chat search suggestions which shouldn't have a huge impact on database performance</li>
</ul>

<p>01-28-2017</p>

<ul>
<li>Unbanned bot access and made bot access restricted instead.  This allows search engines to crawl the stats page and get more clan/community attention while also restricting bot database performance impact to some slower features.</li>
</ul>

<p>1-07-2017:</p>

<ul>
<li>Removed server IP address from server banner image</li>
<li>Added basic AdKats integration to highlight a player if they are banned or warned if running AdKats plugin</li>
<li>Optimizations and improvements: SQL queries combined where possible to reduce the SQL server connection pool size (can drasticly improve performance in some cases with huge databases at remote locations), server HTML banner uses jquery to reload content instead of reloading the whole HTML document (less distracting reloads), file size reductions for CSS, JS, and some image files, background image resizes width to fit various resolutions better, etc.</li>
</ul>

<p>8-29-2016:</p>

<ul>
<li>Removed some potential XSS exploits (thanks zer0sec)</li>
<li>Fixed an issue with the `tyger_stats_sessions` table where it was saving `SID` as INT(11) instead of VARCHAR(100) which caused combined stats page visitor sessions not to be counted correctly. Drop your `tyger_stats_sessions` table and let it rebuild that table using the new code if you are affected.</li>
<li>Made it so you can select and copy text in the chat page instead of making all the content one giant link.</li>
</ul>

<p>4-18-2016:</p>

<ul>
<li>Fixed PHP Notice caused by leftover no longer used variable in signature.php (thanks marshyonline)</li>
</ul>

<p>2-12-2016:</p>

<ul>
<li>Added new maps and weapons (thanks pwk)</li>
<li>Added git-ignore (thanks nikez)</li>
</ul>

<p>1-21-2015:</p>

<ul>
<li>Added visual indicator of server location uncertainty to server banner image in the case that the server's location is not known and is instead guessed</li>
</ul>

<p>1-16-2015:</p>

<ul>
<li>Fixed Gamemode undefined error in maps page</li>
</ul>

<p>1-15-2015:</p>

<ul>
<li>Added optional query string parameters to resize server banner image output as requested</li>
</ul>

<p>1-8-2015:</p>

<ul>
<li>Fixed duplicate loading of javascript resources causing reduced performance</li>
<li>Added a few elements into stats.css</li>
</ul>

<p>1-1-2015:</p>

<ul>
<li>Fixed a reported display bug in Firefox</li>
<li>Did a little code conformity of the player page</li>
</ul>

<p>12-31-2014:</p>

<ul>
<li>Cleaned up a lot of spaghetti code</li>
<li>New directory structure to make editing/upkeep easier</li>
<li>More asynchronous loading of page contents for a smoother/faster experience</li>
<li>Bug fixes and performance improvements</li>
<li>Added missing Final Stand weapons</li>
</ul>

<p>12-7-2014:</p>

<ul>
<li>Fixed missing banner_cache folder causing banner graphs not to appear</li>
</ul>

<p>12-3-2014:</p>

<ul>
<li>Increased font size in banner graph for better visibility for those with wonky php GD extension</li>
<li>Fixed serverbanner.php directory location in server info tab</li>
<li>Removed combined rank calculation from combined player stats pages due to large database load for those with many combined players</li>
</ul>

<p>11-22-2014:</p>

<ul>
<li>Made alignment changes to banner image and fixed graph going off the chart in some cases in banner image</li>
<li>Added optional "&amp;cc=.." query URL query string item to change the country flag displayed in the banner image</li>
</ul>

<p>11-21-2014:</p>

<ul>
<li>Added Final Stand maps and ranks</li>
<li>Added GameTracker style server banner signature images to the Server Info page Banners tab</li>
<li>Added Soldier Name search on Leaderboard</li>
</ul>

<p>11-16-2014:</p>

<ul>
<li>Added pagination to Suspicious Players page</li>
<li>Added expand/contract functionality to player page to reduce page height</li>
<li>Player ranks are now calculated on player stats page after the player page is loaded</li>
<li>Combined server ranks now available on player stats page</li>
</ul>

<p>11-12-2014:</p>

<ul>
<li>Fixed error caused while caching combined server stats of databases with many servers</li>
<li>Added a couple database indexes to speed up certain queries</li>
<li>Fixed issue with server join button link</li>
<li>Updated to new Battlelog background image</li>
</ul>

<p>11-11-2014:</p>

<ul>
<li>Fixed error which sometimes caused duplicates in Top 20 players cache</li>
<li>Performance enhancement of rank function</li>
<li>Added missing country Montenegro</li>
</ul>

<p>11-6-2014:</p>

<ul>
<li>Top 20 players are cached for performance reasons</li>
</ul>

<p>11-4-2014:</p>

<ul>
<li>Optimizations in load time</li>
<li>Missing weapon images corrected</li>
</ul>

<p>11-1-2014:</p>

<ul>
<li>Optimizations</li>
<li>Caching</li>
<li>Bug fixes</li>
<li>Full vehicle stats</li>
</ul>

<p>10-29-2014:</p>

<ul>
<li>Block common bots</li>
<li>Faster combined player counts on a few pages</li>
<li>Added filter to not display servers if their `ConnectionState` is NOT NULL or NOT 'ON' in the `tbl_server` table</li>
</ul>

<p>10-25-2014:</p>

<ul>
<li>DLC Weapons added</li>
<li>Vehicle images and stats added (where possible)</li>
<li>Brighter weapon images</li>
</ul>

<p>10-24-2014:</p>

<ul>
<li>Most DLC now included (weapons and vehicles still missing)</li>
<li>Bugs fixed</li>
<li>More accurate stats</li>
<li>May be a little slower (due to better accuracy)</li>
</ul>

<p>10-12-2014:</p>

<ul>
<li>Battlelog inspired theme</li>
<li>Page load time optimizations using asynchronous queries and background data refresh</li>
<li>Improved search, navigation, and tabs</li>
<li>Chat log can be searched through based on player name, message text, or date/time</li>
</ul>

<p>2-19-2014:</p>

<ul>
<li>Added missing Second Assault banner images</li>
<li>Added updated pChart API</li>
</ul>

<p>2-18-2014:</p>

<ul>
<li>Added Second Assault Maps, Mode, and Weapons</li>
</ul>

<p>1-23-2014:</p>

<ul>
<li>Bug fixes</li>
<li>Code size reduction</li>
<li>Added map pie chart to maps page and moved daily player quantity data chart from maps page to server info page</li>
<li>Reverted back to on-demand signature images instead of caching signature images on the server (for server space usage reasons and to ensure up-to-date data is displayed)</li>
</ul>

<p>1-3-2014:</p>

<ul>
<li>Fixed server info graphs showing old data instead of new data.</li>
<li>Use GameID associated specifically with 'BF4' instead of just the most common GameID in the database.</li>
<li>Better error explanations if database doesn't connect or BF4 servers aren't found in the database.</li>
</ul>

<p>12-30-2013:</p>

<ul>
<li>Fixed players of the week page grouping by player id instead of stats id to remove duplicates</li>
</ul>

<p>12-26-2013:</p>

<ul>
<li>Fixed a stats conformity issue by filtering out false database data for players with incorrect secondary Player IDs.</li>
<li>Fixed signature images by allowing most data to be available in the signature image even if weapon stats are disabled.</li>
</ul>

<p>12-23-2013:</p>

<ul>
<li>Added stats  signature generator</li>
<li>Added pagination to player of the week pages</li>
<li>Added player stats signatures to player stats pages</li>
</ul>

<p>12-22-2013:</p>

<ul>
<li>More server banner generator help in example file and an additional option to adjust online player count</li>
</ul>

<p>12-20-2013:</p>

<ul>
<li>Minor bug fix with counting sessions on the index page and global stats pages</li>
<li>Added server banner generator for generating server banners for website homepage</li>
</ul>

<p>12-19-2013:</p>

<ul>
<li>Slightly different directory structure moving the config file from the common folder to the config folder and renaming it from common.php to config.php</li>
<li>Change database connection variables to constants</li>
<li>Made dog tag names in global pages links to global player stats page</li>
<li>Better battlelog link</li>
<li>Minor bug fixes</li>
<li>Removal of map images since they didn't fit the appearance of the page</li>
<li>Sleeker appearance</li>
</ul>

<p>12-18-2013:</p>

<ul>
<li>Made code more uniform and removed unnecessary duplicate code and duplicate files</li>
<li>Minor bug fixes</li>
<li>Added visual indicator to show which column is currently ordered and which direction it is ordered</li>
<li>Added more comments in code where needed</li>
</ul>

<p>12-17-2013:</p>

<ul>
<li>Disabled global stats if only one server is in the database</li>
<li>Added more graphs</li>
<li>Bug fix for battlelog link</li>
<li>Fixed a typo</li>
<li>Added players of the week</li>
<li>Added missing weapon groups</li>
</ul>

<p>12-16-2013:</p>

<ul>
<li>Global stats pages finished off with menus and more pages</li>
</ul>

<p>12-15-2013:</p>

<ul>
<li>Global stats added</li>
<li>Ranks simplified to speed up pages</li>
<li>Maps in maps page ordered by game mode</li>
</ul>

<p>12-14-2013:</p>

<ul>
<li>SQL injection security fix by only allowing expected inputs</li>
<li>New code structure splitting code into different files in the common folder to make finding code easier</li>
<li>One single index file which leads to all available servers automatically without needing to know server IDs or create multiple separate pages</li>
<li>More comments in the code to explain what is going on</li>
<li>Formatting SQL queries to make them more readable</li>
<li>SQL queries executed with a connection link to avoid issues which might happen if you executed this page inside another page</li>
<li>Minor SQL optimizations</li>
<li>Minor file size reductions</li>
<li>Better error handling</li>
<li>URL query strings changed to make them slightly shorter and to reference PlayerID instead of SoldierName</li>
<li>More graphs</li>
<li>Vehicle stats (as much as the crippled Rcon will allow)</li>
<li>Added DLC</li>
</ul>

<p>11-26-2013:</p>

<ul>
<li>Map image transparency fixed.</li>
<li>CSS cleaned up a bit.</li>
<li>Scoreboard header fixed up a bit.</li>
</ul>

<p>11-25-2013:</p>

<ul>
<li>Popular requests added.</li>
<li>New directory structure.</li>
<li>Images added.</li>
<li>common.php file in the common folder has shared stats page info so less info has to be changed on each individual stats page</li>
<li>Added this project on GitHub ( <a href="https://github.com/tyger07/BF4-Server-Stats">https://github.com/tyger07/BF4-Server-Stats</a> )</li>
</ul>

<p>11-22-2013:</p>

<ul>
<li>Appearance renovated to look like BF4</li>
</ul>

<p>11-21-2013:</p>

<ul>
<li>Many more stats</li>
<li>Tables can be organized by various categories</li>
<li>Scoreboard takes up less area</li>
<li>Weapon ranks added</li>
<li>More ranks in more places</li>
</ul>

<p>11-20-2013:</p>

<ul>
<li>Initial release modified and transferred over from BF3 stats page version</li>
</ul>
        </section>

        <footer>
          Bf4-server-stats is maintained by <a href="https://github.com/tyger07">tyger07</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("bf4 stats page");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>
